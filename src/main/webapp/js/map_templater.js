/**
 * Created by pkochetk on 9/24/16.
 */

var data = [
    {
        "Carrot": [
            {
                "id": 9,
                "name": "Safeway",
                "address": "2558 Berryessa Rd, San Jose, CA 95132",
                "phone": "(408) 272-2287",
                "role": "Grocery",
                "lat": 37.3848005,
                "lon": -121.9372835,
                "totalKg": 14
            },
            {
                "id": 10,
                "name": "Walmart",
                "address": "777 Story Rd, San Jose, CA 95122",
                "phone": "(408) 885-1142",
                "role": "Grocery",
                "lat": 37.3711181,
                "lon": -121.9565098,
                "totalKg": 15
            },
            {
                "id": 11,
                "name": "Target",
                "address": "298 W McKinley Ave, Sunnyvale, CA 94086",
                "phone": "(408) 702-1012",
                "role": "Grocery",
                "lat": 37.3875078,
                "lon": -121.1595421,
                "totalKg": 13
            },
            {
                "id": 12,
                "name": "Costco Wholesale",
                "address": "43621 Pacific Commons Blvd, Fremont, CA 94538",
                "phone": "(510) 897-1091",
                "role": "Grocery",
                "lat": 37.4365838,
                "lon": -121.9763471,
                "totalKg": 20
            },
            {
                "id": 13,
                "name": "Trader Joe's",
                "address": "316 W El Camino Real, Sunnyvale, CA 94087",
                "phone": "(408) 736-7573",
                "role": "Grocery",
                "lat": 37.3372363,
                "lon": -121.9674963,
                "totalKg": 22
            },
            {
                "id": 1,
                "name": "Safeway",
                "address": "3970 Rivermark Plaza, Santa Clara, CA 95054",
                "phone": "(408) 855-0980",
                "role": "Grocery",
                "lat": 37.3992573,
                "lon": -121.9565096,
                "totalKg": 23
            },
            {
                "id": 2,
                "name": "Walmart",
                "address": "301 Ranch Dr, Milpitas, CA 95035",
                "phone": "(408) 934-0304",
                "role": "Grocery",
                "lat": 37.3847592,
                "lon": -121.9723027,
                "totalKg": 20
            },
            {
                "id": 3,
                "name": "Sigma Foods Inc",
                "address": "392 Railroad Ct, Milpitas, CA 95035",
                "phone": "(408) 941-9958",
                "role": "Grocery",
                "lat": 37.4366045,
                "lon": -121.9084951,
                "totalKg": 15
            },
            {
                "id": 4,
                "name": "SevenEleven",
                "address": "596 N Abel St, Milpitas, CA 95035",
                "phone": "(408) 946-6522",
                "role": "Grocery",
                "lat": 37.3885201,
                "lon": -121.9493818,
                "totalKg": 24
            }
        ]
    },
    {
        "Potato": [
            {
                "id": 1,
                "name": "Safeway",
                "address": "3970 Rivermark Plaza, Santa Clara, CA 95054",
                "phone": "(408) 855-0980",
                "role": "Grocery",
                "lat": 37.3992573,
                "lon": -121.9565096,
                "totalKg": 23
            },
            {
                "id": 2,
                "name": "Walmart",
                "address": "301 Ranch Dr, Milpitas, CA 95035",
                "phone": "(408) 934-0304",
                "role": "Grocery",
                "lat": 37.3847592,
                "lon": -121.9723027,
                "totalKg": 20
            },
            {
                "id": 3,
                "name": "Sigma Foods Inc",
                "address": "392 Railroad Ct, Milpitas, CA 95035",
                "phone": "(408) 941-9958",
                "role": "Grocery",
                "lat": 37.4366045,
                "lon": -121.9084951,
                "totalKg": 15
            },
            {
                "id": 4,
                "name": "SevenEleven",
                "address": "596 N Abel St, Milpitas, CA 95035",
                "phone": "(408) 946-6522",
                "role": "Grocery",
                "lat": 37.3885201,
                "lon": -121.9493818,
                "totalKg": 24
            },
            {
                "id": 5,
                "name": "Costco Wholesale",
                "address": "1709 Automation Pkwy, San Jose, CA 95131",
                "phone": "(408) 678-2150",
                "role": "Grocery",
                "lat": 37.4365838,
                "lon": -121.9763471,
                "totalKg": 7
            },
            {
                "id": 6,
                "name": "Target",
                "address": "2155 Morrill Ave, San Jose, CA 95132",
                "phone": "(408) 946-6791",
                "role": "Grocery",
                "lat": 37.3875078,
                "lon": -121.1595421,
                "totalKg": 18
            },
            {
                "id": 7,
                "name": "Costco Wholesale",
                "address": "150 Lawrence Station Rd, Sunnyvale, CA 94086",
                "phone": "(408) 730-1892",
                "role": "Grocery",
                "lat": 37.4365838,
                "lon": -121.9763471,
                "totalKg": 25
            },
            {
                "id": 8,
                "name": "Trader Joe's",
                "address": "635 Coleman Ave, San Jose, CA 95110",
                "phone": "(408) 298-9731",
                "role": "Grocery",
                "lat": 37.3372363,
                "lon": -121.9674963,
                "totalKg": 27
            }
        ]
    },
    {
        "Tomato": [
            {
                "id": 14,
                "name": "SevenEleven",
                "address": "1591 Flickinger Ave, San Jose, CA 95131",
                "phone": "(408) 258-7711",
                "role": "Grocery",
                "lat": 37.3885201,
                "lon": -121.9493818,
                "totalKg": 23
            },
            {
                "id": 15,
                "name": "Walmart",
                "address": "4080 Stevens Creek Blvd, San Jose, CA 95128",
                "phone": "(408) 556-4505",
                "role": "Grocery",
                "lat": 37.3372776,
                "lon": -121.9674961,
                "totalKg": 18
            },
            {
                "id": 16,
                "name": "Target",
                "address": "43950 Pacific Commons Blvd, Fremont, CA 94538",
                "phone": "(510) 771-1616",
                "role": "Grocery",
                "lat": 37.3875078,
                "lon": -121.1595421,
                "totalKg": 25
            },
            {
                "id": 17,
                "name": "First Mart",
                "address": "3730 N 1st St # 100, San Jose, CA 95134",
                "phone": "(408) 435-8424",
                "role": "Grocery",
                "lat": 37.3806225,
                "lon": -121.0193567,
                "totalKg": 5
            },
            {
                "id": 18,
                "name": "Trader Joe's",
                "address": "5269 Prospect Rd, San Jose, CA 95129",
                "phone": "(408) 446-5055",
                "role": "Grocery",
                "lat": 37.3372363,
                "lon": -121.9674963,
                "totalKg": 3
            }
        ]
    },
    {
        "Broccoli": [
            {
                "id": 19,
                "name": "Safeway",
                "address": "1300 W San Carlos St, San Jose, CA 95126",
                "phone": "(408) 882-0999",
                "role": "Grocery",
                "lat": 37.3848005,
                "lon": -121.9723025,
                "totalKg": 6
            },
            {
                "id": 20,
                "name": "Walmart",
                "address": "3255 Mission College Blvd, Santa Clara, CA 95054",
                "phone": "(408) 961-3599",
                "role": "Grocery",
                "lat": 37.3372776,
                "lon": -121.9674961,
                "totalKg": 30
            },
            {
                "id": 21,
                "name": "Whole Foods Marke",
                "address": "4800 El Camino Real, Los Altos, CA 94022",
                "phone": "(650) 559-0300",
                "role": "Grocery",
                "lat": 37.3806225,
                "lon": -121.0193567,
                "totalKg": 14
            },
            {
                "id": 22,
                "name": "SevenEleven",
                "address": "1555 Los Padres Blvd, Santa Clara, CA 95050",
                "phone": "(408) 554-1432",
                "role": "Grocery",
                "lat": 37.3885201,
                "lon": -121.9493818,
                "totalKg": 3
            },
            {
                "id": 23,
                "name": "Sprouts Farmers Market",
                "address": "111 E El Camino Real, Sunnyvale, CA 94087",
                "phone": "(408) 702-1172",
                "role": "Grocery",
                "lat": 37.3806225,
                "lon": -121.0193567,
                "totalKg": 8
            },
            {
                "id": 24,
                "name": "Target",
                "address": "450 N Capitol Ave, San Jose, CA 95133",
                "phone": "(408) 254-8931",
                "role": "Grocery",
                "lat": 37.3875078,
                "lon": -121.1595421,
                "totalKg": 10
            },
            {
                "id": 25,
                "name": "Zad Grocery",
                "address": "4481 Stevens Creek Blvd, Santa Clara, CA 95051",
                "phone": "(408) 244-2699",
                "role": "Grocery",
                "lat": 37.3806225,
                "lon": -121.0193567,
                "totalKg": 2
            },
            {
                "id": 26,
                "name": "Trader Joe's",
                "address": "7250 Bollinger Rd, San Jose, CA 95129",
                "phone": "(408) 873-7384",
                "role": "Grocery",
                "lat": 37.3806225,
                "lon": -121.0193567,
                "totalKg": 8
            },
            {
                "id": 27,
                "name": "Grocery Outlet",
                "address": "215 W Calaveras Blvd, Milpitas, CA 95035",
                "phone": "(408) 586-8205",
                "role": "Grocery",
                "lat": 37.3806225,
                "lon": -121.0193567,
                "totalKg": 7
            },
            {
                "id": 28,
                "name": "99 Ranch Market",
                "address": "338 Barber Ln, Milpitas, CA 95035",
                "phone": "(408) 943-6699",
                "role": "Grocery",
                "lat": 37.3806225,
                "lon": -121.0193567,
                "totalKg": 12
            }
        ]
    },
    {
        "Cabbage": [
            {
                "id": 29,
                "name": "SevenEleven",
                "address": "3777 Lafayette St, Santa Clara, CA 95054",
                "phone": "(408) 988-4281",
                "role": "Grocery",
                "lat": 37.3885201,
                "lon": -121.9493818,
                "totalKg": 6
            },
            {
                "id": 30,
                "name": "Target",
                "address": "298 W McKinley Ave, Sunnyvale, CA 94086",
                "phone": "(408) 702-1012",
                "role": "Grocery",
                "lat": 37.3875078,
                "lon": -121.1595421,
                "totalKg": 12
            },
            {
                "id": 30,
                "name": "Target",
                "address": "298 W McKinley Ave, Sunnyvale, CA 94086",
                "phone": "(408) 702-1012",
                "role": "Grocery",
                "lat": 37.3875078,
                "lon": -121.1595421,
                "totalKg": 12
            },
            {
                "id": 31,
                "name": "Abadir Grocery",
                "address": "1065 Lafayette St, Santa Clara, CA 95050",
                "phone": "+1-408-444-44-44",
                "role": "Grocery",
                "lat": 37.3806225,
                "lon": -121.0193567,
                "totalKg": 9
            },
            {
                "id": 31,
                "name": "Abadir Grocery",
                "address": "1065 Lafayette St, Santa Clara, CA 95050",
                "phone": "+1-408-444-44-44",
                "role": "Grocery",
                "lat": 37.3806225,
                "lon": -121.0193567,
                "totalKg": 9
            },
            {
                "id": 32,
                "name": "Grocery Outlet Bargain Market",
                "address": "4949 Stevenson Blvd F, Fremont, CA 94538",
                "phone": "(510) 651-2005",
                "role": "Grocery",
                "lat": 37.4568551,
                "lon": -121.0572313,
                "totalKg": 16
            },
            {
                "id": 33,
                "name": "Marina Grocery",
                "address": "25 N Milpitas Blvd, Milpitas, CA 95035",
                "phone": "(408) 263-1288",
                "role": "Grocery",
                "lat": 37.4568551,
                "lon": -121.0572313,
                "totalKg": 5
            }
        ]
    }
];

var icons = {
    "Potato": "potato",
    "Carrot": "carrot",
    "Tomato": "tomato",
    "Broccoli": "broccoli",
    "Cabbage": "cabbage",
};



function fillGeneralMenuTabs() {
    var text = '<ul>';
    for (var i=0; i<data.length; i++) {
        var veg = data[i];
        var veg_name = Object.getOwnPropertyNames(veg)[0];
        text += generateLiFoeGeneralTabs(veg_name, icons[veg_name], i==0);
    }
    text += '</ul>';
    $(".general_menu").html(text);
}

function generateLiFoeGeneralTabs(name,icon, is_active) {
    var active_text = "";
    if (is_active) {
        active_text = " active"
    }
    return '<li class="general_menu_tabs" >' +
                '<a class="general_menu_a' + active_text + '" href="#" good_type="'+name+'">' +
                '<img src="img/' + icon + '.svg" class="svg" alt="'+name+'"/>' +
            '</li>';
}

var CURRENT_GOOD = 0;

function fillTabs() {
    var text = '';
    var type;
    for (var i=0;i < data.length; i++) {
        type = Object.getOwnPropertyNames(data[i])[0];
        console.log(type);
        var value = data[i][type];
        console.log("TYPE:");
        console.log(type);
        text += generateTab(i+1, type, value);
    }
    console.log(text);
    $("#tabs").html(text);
}

function generateTab(id, type, data) {
    console.log(id);
    console.log(type);
    console.log(data);
    var text = '<div id="tab'+id+'" class="tab">';
    text += '<h5 class="type">'+type+'</h5>';
    text += '<ul class="type_row">';

    for (var j=0; j<data.length; j++) {
        var org = data[j]
        text += '<li>';
        text +='<a class="type_item_a" href="map.html#'+j+'">' + org["name"] + "<span>"+org["totalKg"]+"</span></a>";
        text += '</li>';
    };
    text += '</ul>';
    text += '</div>';
    return text;
}

function generateDescription(name, address, phone) {
    var text = "";
    var text = '<div class="info_content">' +
                    '<h3>'+ name +'</h3>' +
                    '<p>'+address+'</p>' +
                    '<p>'+phone+'</p>' +
                    '<div class="text_align">'+
                        '<button type="button" class="btn btn-danger">Pick Up</button> ' +
                    '</div>'
                '</div>';
    //text += generateClock();
    return text;

}